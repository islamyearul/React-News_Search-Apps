{"ast":null,"code":"import _regeneratorRuntime from\"D:/islamyearul/react-search-apps/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/islamyearul/react-search-apps/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _classCallCheck from\"D:/islamyearul/react-search-apps/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";import _createClass from\"D:/islamyearul/react-search-apps/node_modules/@babel/runtime/helpers/esm/createClass.js\";import axios from'../utilis/axios';export var newsCategory={technology:'technology',business:'business',entertainment:'entertainment',health:'health',science:'science',sports:'sports',general:'general'};var MAX_ITEM_PER_PAGE=5;var News=/*#__PURE__*/function(){function News(category){_classCallCheck(this,News);this._category=category;this._searchItem='';this._pageSize=MAX_ITEM_PER_PAGE;this._currentPage=1;this._totalPage=1;this._isPrev=this._isPrev;this._isNext=this._isNext;}_createClass(News,[{key:\"getNews\",value:function(){var _getNews=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,data;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(this._geturl());case 3:_yield$axios$get=_context.sent;data=_yield$axios$get.data;this._totalPage=Math.ceil(data.totalResults/MAX_ITEM_PER_PAGE);//total page\n//console.log(this._totalPage, this._pageSize);\nreturn _context.abrupt(\"return\",{articles:data.articles,totalPage:this._totalPage,currentPage:this._currentPage,category:this._category,totalResults:data.totalResults,isNext:this._isNext(),isPrev:this._isPrev()});case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);throw new Error(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,this,[[0,9]]);}));function getNews(){return _getNews.apply(this,arguments);}return getNews;}()},{key:\"nextPage\",value:function nextPage(){if(this._isNext()){this._currentPage++;return this.getNews();}return false;}},{key:\"prevPage\",value:function prevPage(){if(this._isPrev()){this._currentPage--;return this.getNews();}return false;}},{key:\"setCurrentPage\",value:function setCurrentPage(pageNumber){if(pageNumber<1&&pageNumber>this._totalPage){throw new Error('Page number is out of range');}this._currentPage=pageNumber;return this.getNews();}},{key:\"changeCategory\",value:function changeCategory(category){this._category=category;this._currentPage=1;return this.getNews();}},{key:\"search\",value:function search(Term){this._searchItem=Term;this._currentPage=1;return this.getNews();}},{key:\"_geturl\",value:function _geturl(){var url='/?';if(this._category)url+=\"category=\".concat(this._category);if(this._searchItem)url+=\"&q=\".concat(this._searchItem);if(this._pageSize)url+=\"&pageSize=\".concat(this._pageSize);if(this._currentPage)url+=\"&page=\".concat(this._currentPage);return url;}},{key:\"_isNext\",value:function _isNext(){return this._currentPage<this._totalPage;}},{key:\"_isPrev\",value:function _isPrev(){return this._currentPage>1;}}]);return News;}();export{News as default};","map":{"version":3,"names":["axios","newsCategory","technology","business","entertainment","health","science","sports","general","MAX_ITEM_PER_PAGE","News","category","_category","_searchItem","_pageSize","_currentPage","_totalPage","_isPrev","_isNext","get","_geturl","data","Math","ceil","totalResults","articles","totalPage","currentPage","isNext","isPrev","Error","getNews","pageNumber","Term","url"],"sources":["D:/islamyearul/react-search-apps/src/news/index.js"],"sourcesContent":["\r\nimport axios from '../utilis/axios';\r\n\r\nexport const newsCategory = {\r\n    technology : 'technology',\r\n    business : 'business',\r\n    entertainment : 'entertainment',\r\n    health : 'health',\r\n    science : 'science',\r\n    sports : 'sports',\r\n    general : 'general',\r\n\r\n}\r\n\r\nconst MAX_ITEM_PER_PAGE = 5;\r\n\r\nexport default class News {\r\n\r\n    constructor(category){\r\n        this._category = category;\r\n        this._searchItem = '';\r\n        this._pageSize = MAX_ITEM_PER_PAGE;\r\n        this._currentPage = 1;\r\n        this._totalPage = 1; \r\n        this._isPrev = this._isPrev;\r\n        this._isNext = this._isNext;\r\n      }\r\n\r\n   async getNews(){\r\n        try{\r\n            const {data} = await axios.get(this._geturl());\r\n            this._totalPage = Math.ceil(data.totalResults/MAX_ITEM_PER_PAGE); //total page\r\n            //console.log(this._totalPage, this._pageSize);\r\n            return{\r\n                articles: data.articles,\r\n                totalPage: this._totalPage,\r\n                currentPage: this._currentPage,\r\n                category: this._category,\r\n                totalResults: data.totalResults,\r\n                isNext: this._isNext(),\r\n                isPrev: this._isPrev(),\r\n\r\n            }\r\n\r\n        }catch(e){\r\n           throw new Error(e);\r\n        }\r\n      \r\n    }\r\n\r\n    nextPage(){\r\n        if(this._isNext()){\r\n            this._currentPage++;\r\n            return this.getNews();\r\n        }\r\n        return false;\r\n    }\r\n\r\n    prevPage(){\r\n        if (this._isPrev()){\r\n            this._currentPage--;\r\n            return this.getNews();\r\n        }\r\n        return false;        \r\n    } \r\n\r\n    setCurrentPage(pageNumber){\r\n        if(pageNumber < 1 && pageNumber > this._totalPage){\r\n            throw new Error('Page number is out of range');\r\n        }\r\n        this._currentPage = pageNumber;\r\n        return this.getNews();\r\n    }\r\n\r\n    changeCategory(category){\r\n        this._category = category;\r\n        this._currentPage = 1;\r\n        return this.getNews();\r\n    }\r\n    search(Term){\r\n        this._searchItem = Term;\r\n        this._currentPage = 1;\r\n        return this.getNews();\r\n    }\r\n\r\n    _geturl(){\r\n        let url = '/?';\r\n        if(this._category) url += `category=${this._category}`; \r\n        if(this._searchItem) url += `&q=${this._searchItem}`; \r\n        if(this._pageSize) url += `&pageSize=${this._pageSize}`; \r\n        if(this._currentPage) url += `&page=${this._currentPage}`; \r\n\r\n        return url;\r\n\r\n    }\r\n\r\n    _isNext(){\r\n        return this._currentPage < this._totalPage;\r\n    }\r\n\r\n   _isPrev (){\r\n        return this._currentPage > 1;\r\n    }\r\n\r\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}